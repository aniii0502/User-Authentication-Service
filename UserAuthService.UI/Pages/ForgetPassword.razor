@page "/forgotpassword"
@inject AuthService AuthService

<h3>Forgot Password</h3>

<EditForm Model="forgotModel" OnValidSubmit="HandleForgotPassword">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div>
        <label>Email:</label>
        <InputText @bind-Value="forgotModel.Email" />
    </div>

    <button type="submit">Send Reset Link</button>
</EditForm>

@if (!string.IsNullOrEmpty(message))
{
    <p>@message</p>
}

@code {
  private ForgotPasswordRequest forgotModel = new ForgotPasswordRequest
    {
        Email = string.Empty
    };
    private string message=string.Empty;

    private async Task HandleForgotPassword()
    {
        var success = await AuthService.ForgotPassword(forgotModel);
        message = success ? "Reset link sent to your email." : "Failed to send reset link.";
    }
}
